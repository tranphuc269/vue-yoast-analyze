{"version":3,"sources":["../../../src/stringProcessing/matchTextWithTransliteration.js"],"names":["text","keyword","locale","keywordRegex","toRegex","turkishMappings","RegExp","map","x","join","matches","match","replace","transliterateKeyword","transliterateKeywordRegex","transliterateMatches","combinedArray","concat","transliterateWPKeyword","transliterateWPKeywordRegex","transliterateWPMatches"],"mappings":";;;;;;kBA2Be,UAAUA,IAAV,EAAgBC,OAAhB,EAAyBC,MAAzB,EAAkC;AAChD,KAAIC,eAAeC,QAASH,OAAT,EAAkBC,MAAlB,CAAnB;;AAEA,KAAKA,WAAW,OAAhB,EAA0B;AACzB,QAAMG,kBAAkB,wDAA0BJ,OAA1B,CAAxB;AACAE,iBAAe,IAAIG,MAAJ,CAAYD,gBAAgBE,GAAhB,CAAqBC,KAAK,+BAAiBA,CAAjB,CAA1B,EAAiDC,IAAjD,CAAuD,GAAvD,CAAZ,EAA0E,IAA1E,CAAf;AACA;AACD,KAAIC,UAAUV,KAAKW,KAAL,CAAYR,YAAZ,KAA8B,EAA5C;;AAEAH,QAAOA,KAAKY,OAAL,CAAcT,YAAd,EAA4B,EAA5B,CAAP;;AAEA,KAAIU,uBAAuB,6BAAeZ,OAAf,EAAwBC,MAAxB,CAA3B;AACA,KAAIY,4BAA4BV,QAASS,oBAAT,EAA+BX,MAA/B,CAAhC;AACA,KAAIa,uBAAuBf,KAAKW,KAAL,CAAYG,yBAAZ,KAA2C,EAAtE;AACA,KAAIE,gBAAgBN,QAAQO,MAAR,CAAgBF,oBAAhB,CAApB;;AAEA,KAAIG,yBAAyB,oCAAiBjB,OAAjB,EAA0BC,MAA1B,CAA7B;;AAEA,KAAK,EAAIgB,2BAA2BL,oBAA/B,CAAL,EAA6D;AAC5D,MAAIM,8BAA8Bf,QAASc,sBAAT,EAAiChB,MAAjC,CAAlC;AACA,MAAIkB,yBAAyBpB,KAAKW,KAAL,CAAYQ,2BAAZ,KAA6C,EAA1E;;AAEAH,kBAAgBA,cAAcC,MAAd,CAAsBG,sBAAtB,CAAhB;AACA;;AAED,QAAO,mBAAKJ,aAAL,EAAoB,UAAUL,KAAV,EAAkB;AAC5C,SAAO,2BAAaA,KAAb,CAAP;AACA,EAFM,CAAP;AAGA,C;;AAvDD;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;AAQA,IAAIP,UAAU,SAAVA,OAAU,CAAUH,OAAV,EAAmBC,MAAnB,EAA4B;AACzCD,WAAU,+BAAiBA,OAAjB,EAA0B,KAA1B,EAAiC,EAAjC,EAAqCC,MAArC,CAAV;AACA,QAAO,IAAII,MAAJ,CAAYL,OAAZ,EAAqB,IAArB,CAAP;AACA,CAHD;;AAKA","file":"matchTextWithTransliteration.js","sourcesContent":["import { map } from \"lodash-es\";\nimport addWordBoundary from \"./addWordboundary.js\";\nimport stripSpaces from \"./stripSpaces.js\";\nimport transliterate from \"./transliterate.js\";\nimport transliterateWP from \"./transliterateWPstyle.js\";\nimport { replaceTurkishIsMemoized } from \"./specialCharacterMappings\";\n\n/**\n * Creates a regex from the keyword with included wordboundaries.\n *\n * @param {string} keyword  The keyword to create a regex from.\n * @param {string} locale   The locale.\n *\n * @returns {RegExp} Regular expression of the keyword with word boundaries.\n */\nvar toRegex = function( keyword, locale ) {\n\tkeyword = addWordBoundary( keyword, false, \"\", locale );\n\treturn new RegExp( keyword, \"ig\" );\n};\n\n/**\n * Matches a string with and without transliteration.\n * @param {string} text The text to match.\n * @param {string} keyword The keyword to match in the text.\n * @param {string} locale The locale used for transliteration.\n * @returns {Array} All matches from the original as the transliterated text and keyword.\n */\nexport default function( text, keyword, locale ) {\n\tvar keywordRegex = toRegex( keyword, locale );\n\n\tif ( locale === \"tr_TR\" ) {\n\t\tconst turkishMappings = replaceTurkishIsMemoized( keyword );\n\t\tkeywordRegex = new RegExp( turkishMappings.map( x => addWordBoundary( x ) ).join( \"|\" ), \"ig\" );\n\t}\n\tvar matches = text.match( keywordRegex ) || [];\n\n\ttext = text.replace( keywordRegex, \"\" );\n\n\tvar transliterateKeyword = transliterate( keyword, locale );\n\tvar transliterateKeywordRegex = toRegex( transliterateKeyword, locale );\n\tvar transliterateMatches = text.match( transliterateKeywordRegex ) || [];\n\tvar combinedArray = matches.concat( transliterateMatches );\n\n\tvar transliterateWPKeyword = transliterateWP( keyword, locale );\n\n\tif ( ! ( transliterateWPKeyword === transliterateKeyword ) ) {\n\t\tvar transliterateWPKeywordRegex = toRegex( transliterateWPKeyword, locale );\n\t\tvar transliterateWPMatches = text.match( transliterateWPKeywordRegex ) || [];\n\n\t\tcombinedArray = combinedArray.concat( transliterateWPMatches );\n\t}\n\n\treturn map( combinedArray, function( match ) {\n\t\treturn stripSpaces( match );\n\t} );\n}\n"]}