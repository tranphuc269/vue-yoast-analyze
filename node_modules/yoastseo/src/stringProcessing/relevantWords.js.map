{"version":3,"sources":["../../../src/stringProcessing/relevantWords.js"],"names":["functionWordLists","densityLowerLimit","densityUpperLimit","relevantWordLimit","wordCountLowerLimit","specialCharacters","getWordCombinations","text","combinationSize","functionWords","sentences","words","combination","sentence","toLocaleLowerCase","word","i","length","slice","WordCombination","calculateOccurrences","wordCombinations","occurrences","wordCombination","getCombination","incrementOccurrences","getRelevantCombinations","filter","getOccurrences","getRelevance","sortCombinations","sort","combinationA","combinationB","difference","getLength","filterOneCharacterWordCombinations","getWords","filterFunctionWordsAnywhere","filterFunctionWordsAtBeginning","filterFunctionWordsAtEnding","lastWordIndex","filterFunctionWordsAtBeginningAndEnding","filterOnDensity","wordCount","lowerLimit","upperLimit","getDensity","filterEndingWith","str","exceptions","combinationstr","endsWith","filterFunctionWords","combinations","filteredAnywhere","filteredAtBeginningAndEnding","filteredAtEnding","filteredAtBeginning","filterCombinations","language","getRelevantWords","locale","hasOwnProperty","all","oneWordCombinations","oneWordRelevanceMap","twoWordCombinations","threeWordCombinations","fourWordCombinations","fiveWordCombinations","concat","setRelevantWords"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA;;;;AAEA;;;;AAHA,MAAMA,oBAAoB,iCAA1B;;;AAcA,MAAMC,oBAAoB,CAA1B;AACA,MAAMC,oBAAoB,IAA1B;AACA,MAAMC,oBAAoB,GAA1B;AACA,MAAMC,sBAAsB,GAA5B;;AAEA;AACA,MAAMC,oBAAoB,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,QAAjB,EAA2B,GAA3B,EAAgC,GAAhC,EAAqC,GAArC,EAA0C,IAA1C,EAAgD,GAAhD,EAAqD,GAArD,EAA0D,GAA1D,EAA+D,GAA/D,EAAoE,GAApE,EAAyE,GAAzE,EAA8E,GAA9E,EAAmF,GAAnF,EAAwF,GAAxF,EAA6F,GAA7F,EAAkG,IAAlG,EAAwG,IAAxG,EAA8G,QAA9G,CAA1B;;AAEA;;;;;;;;AAQA,SAASC,mBAAT,CAA8BC,IAA9B,EAAoCC,eAApC,EAAqDC,aAArD,EAAqE;AACpE,OAAMC,YAAY,4BAAcH,IAAd,CAAlB;;AAEA,KAAII,KAAJ,EAAWC,WAAX;;AAEA,QAAO,uBAASF,SAAT,EAAoB,UAAUG,QAAV,EAAqB;AAC/CA,aAAWA,SAASC,iBAAT,EAAX;AACAD,aAAW,uBAAiBA,QAAjB,CAAX;AACAF,UAAQ,wBAAUE,QAAV,CAAR;;AAEA,SAAO,sBAAQ,mBAAKF,KAAL,EAAY,UAAUI,IAAV,EAAgBC,CAAhB,EAAoB;AAC9C;AACA,OAAKA,IAAIR,eAAJ,GAAsB,CAAtB,GAA0BG,MAAMM,MAArC,EAA8C;AAC7CL,kBAAcD,MAAMO,KAAN,CAAaF,CAAb,EAAgBA,IAAIR,eAApB,CAAd;AACA,WAAO,IAAIW,yBAAJ,CAAqBP,WAArB,EAAkC,CAAlC,EAAqCH,aAArC,CAAP;AACA;;AAED,UAAO,KAAP;AACA,GARc,CAAR,CAAP;AASA,EAdM,CAAP;AAeA;;AAED;;;;;;AAMA,SAASW,oBAAT,CAA+BC,gBAA/B,EAAkD;AACjD,OAAMC,cAAc,EAApB;;AAEA,wBAASD,gBAAT,EAA2B,UAAUE,eAAV,EAA4B;AACtD,QAAMX,cAAcW,gBAAgBC,cAAhB,EAApB;;AAEA,MAAK,CAAE,mBAAKF,WAAL,EAAkBV,WAAlB,CAAP,EAAyC;AACxCU,eAAaV,WAAb,IAA6BW,eAA7B;AACA;;AAEDD,cAAaV,WAAb,EAA2Ba,oBAA3B;AACA,EARD;;AAUA,QAAO,sBAAQH,WAAR,CAAP;AACA;;AAED;;;;;;;AAOA,SAASI,uBAAT,CAAkCL,gBAAlC,EAAqD;AACpDA,oBAAmBA,iBAAiBM,MAAjB,CAAyB,UAAUf,WAAV,EAAwB;AACnE,SAAOA,YAAYgB,cAAZ,OAAiC,CAAjC,IACNhB,YAAYiB,YAAZ,OAA+B,CADhC;AAEA,EAHkB,CAAnB;AAIA,QAAOR,gBAAP;AACA;;AAED;;;;;;AAMA,SAASS,gBAAT,CAA2BT,gBAA3B,EAA8C;AAC7CA,kBAAiBU,IAAjB,CAAuB,UAAUC,YAAV,EAAwBC,YAAxB,EAAuC;AAC7D,QAAMC,aAAaD,aAAaJ,YAAb,KAA8BG,aAAaH,YAAb,EAAjD;AACA;AACA,MAAKK,eAAe,CAApB,EAAwB;AACvB,UAAOA,UAAP;AACA;AACD;AACA,SAAOD,aAAaE,SAAb,KAA2BH,aAAaG,SAAb,EAAlC;AACA,EARD;AASA;;AAED;;;;;;AAMA,SAASC,kCAAT,CAA6Cf,gBAA7C,EAAgE;AAC/D,QAAOA,iBAAiBM,MAAjB,CAAyB,UAAUf,WAAV,EAAwB;AACvD,SAAO,EAAIA,YAAYuB,SAAZ,OAA4B,CAA5B,IAAiCvB,YAAYyB,QAAZ,GAAwB,CAAxB,EAA4BpB,MAA5B,IAAsC,CAA3E,CAAP;AACA,EAFM,CAAP;AAGA;;AAED;;;;;;;AAOA,SAASqB,2BAAT,CAAsCjB,gBAAtC,EAAwDZ,aAAxD,EAAwE;AACvE,QAAOY,iBAAiBM,MAAjB,CAAyB,UAAUf,WAAV,EAAwB;AACvD,SAAO,uBACN,4BAAcH,aAAd,EAA6BG,YAAYyB,QAAZ,EAA7B,CADM,CAAP;AAGA,EAJM,CAAP;AAKA;;AAED;;;;;;;AAOA,SAASE,8BAAT,CAAyClB,gBAAzC,EAA2DZ,aAA3D,EAA2E;AAC1E,QAAOY,iBAAiBM,MAAjB,CAAyB,UAAUf,WAAV,EAAwB;AACvD,SAAO,CAAE,wBAAUH,aAAV,EAAyBG,YAAYyB,QAAZ,GAAwB,CAAxB,CAAzB,CAAT;AACA,EAFM,CAAP;AAGA;;AAED;;;;;;;AAOA,SAASG,2BAAT,CAAsCnB,gBAAtC,EAAwDZ,aAAxD,EAAwE;AACvE,QAAOY,iBAAiBM,MAAjB,CAAyB,UAAUf,WAAV,EAAwB;AACvD,QAAMD,QAAQC,YAAYyB,QAAZ,EAAd;AACA,QAAMI,gBAAgB9B,MAAMM,MAAN,GAAe,CAArC;AACA,SAAO,CAAE,wBAAUR,aAAV,EAAyBE,MAAO8B,aAAP,CAAzB,CAAT;AACA,EAJM,CAAP;AAKA;;AAED;;;;;;;AAOA,SAASC,uCAAT,CAAkDrB,gBAAlD,EAAoEZ,aAApE,EAAoF;AACnFY,oBAAmBkB,+BAAgClB,gBAAhC,EAAkDZ,aAAlD,CAAnB;AACAY,oBAAmBmB,4BAA6BnB,gBAA7B,EAA+CZ,aAA/C,CAAnB;AACA,QAAOY,gBAAP;AACA;;AAED;;;;;;;;;AASA,SAASsB,eAAT,CAA0BtB,gBAA1B,EAA4CuB,SAA5C,EAAuDC,UAAvD,EAAmEC,UAAnE,EAAgF;AAC/E,QAAOzB,iBAAiBM,MAAjB,CAAyB,UAAUf,WAAV,EAAwB;AACvD,SAASA,YAAYmC,UAAZ,CAAwBH,SAAxB,KAAuCC,UAAvC,IAAqDjC,YAAYmC,UAAZ,CAAwBH,SAAxB,IAAsCE,UAApG;AAEA,EAHM,CAAP;AAIA;;AAED;;;;;;;;AAQA,SAASE,gBAAT,CAA2B3B,gBAA3B,EAA6C4B,GAA7C,EAAkDC,UAAlD,EAA+D;AAC9D7B,oBAAmBA,iBAAiBM,MAAjB,CAAyB,UAAUf,WAAV,EAAwB;AACnE,QAAMuC,iBAAiBvC,YAAYY,cAAZ,EAAvB;AACA,OAAM,IAAIR,IAAI,CAAd,EAAiBA,IAAIkC,WAAWjC,MAAhC,EAAwCD,GAAxC,EAA8C;AAC7C,OAAKmC,eAAeC,QAAf,CAAyBF,WAAYlC,CAAZ,CAAzB,CAAL,EAAkD;AACjD,WAAO,IAAP;AACA;AACD;AACD,SAAO,CAAEmC,eAAeC,QAAf,CAAyBH,GAAzB,CAAT;AACA,EARkB,CAAnB;AASA,QAAO5B,gBAAP;AACA;;AAED;;;;;;;;AAQA,SAASgC,mBAAT,CAA8BC,YAA9B,EAA4C7C,aAA5C,EAA4D;AAC3D6C,gBAAehB,4BAA6BgB,YAA7B,EAA2C7C,cAAc8C,gBAAzD,CAAf;AACAD,gBAAeZ,wCAAyCY,YAAzC,EAAuD7C,cAAc+C,4BAArE,CAAf;AACAF,gBAAed,4BAA6Bc,YAA7B,EAA2C7C,cAAcgD,gBAAzD,CAAf;AACAH,gBAAef,+BAAgCe,YAAhC,EAA8C7C,cAAciD,mBAA5D,CAAf;AACA,QAAOJ,YAAP;AACA;;AAED;;;;;;;;;AASA,SAASK,kBAAT,CAA6BL,YAA7B,EAA2C7C,aAA3C,EAA0DmD,QAA1D,EAAqE;AACpEN,gBAAehB,4BAA6BgB,YAA7B,EAA2CjD,iBAA3C,CAAf;AACAiD,gBAAelB,mCAAoCkB,YAApC,CAAf;AACAA,gBAAeD,oBAAqBC,YAArB,EAAmC7C,aAAnC,CAAf;AACA,KAAKmD,aAAa,IAAlB,EAAyB;AACxBN,iBAAeN,iBAAkBM,YAAlB,EAAgC,IAAhC,EAAsC,EAAtC,CAAf;AACA;AACD,QAAOA,YAAP;AACA;AACD;;;;;;;AAOA,SAASO,gBAAT,CAA2BtD,IAA3B,EAAiCuD,MAAjC,EAA0C;AACzC,KAAIF,WAAW,2BAAaE,MAAb,CAAf;AACA,KAAK,CAAE9D,kBAAkB+D,cAAlB,CAAkCH,QAAlC,CAAP,EAAsD;AACrDA,aAAW,IAAX;AACA;;AAED,OAAMnD,gBAAgBT,kBAAmB4D,QAAnB,CAAtB;;AAEA,OAAMjD,QAAQL,oBAAqBC,IAArB,EAA2B,CAA3B,EAA8BE,cAAcuD,GAA5C,CAAd;AACA,OAAMpB,YAAYjC,MAAMM,MAAxB;;AAEA,KAAIgD,sBAAsBvC,wBACzBN,qBAAsBT,KAAtB,CADyB,CAA1B;;AAIAmB,kBAAkBmC,mBAAlB;AACAA,uBAAsB,oBAAMA,mBAAN,EAA2B,GAA3B,CAAtB;;AAEA,OAAMC,sBAAsB,EAA5B;;AAEA,wBAASD,mBAAT,EAA8B,UAAUrD,WAAV,EAAwB;AACrDsD,sBAAqBtD,YAAYY,cAAZ,EAArB,IAAsDZ,YAAYiB,YAAZ,EAAtD;AACA,EAFD;;AAIA,OAAMsC,sBAAsB/C,qBAAsBd,oBAAqBC,IAArB,EAA2B,CAA3B,EAA8BE,cAAcuD,GAA5C,CAAtB,CAA5B;AACA,OAAMI,wBAAwBhD,qBAAsBd,oBAAqBC,IAArB,EAA2B,CAA3B,EAA8BE,cAAcuD,GAA5C,CAAtB,CAA9B;AACA,OAAMK,uBAAuBjD,qBAAsBd,oBAAqBC,IAArB,EAA2B,CAA3B,EAA8BE,cAAcuD,GAA5C,CAAtB,CAA7B;AACA,OAAMM,uBAAuBlD,qBAAsBd,oBAAqBC,IAArB,EAA2B,CAA3B,EAA8BE,cAAcuD,GAA5C,CAAtB,CAA7B;;AAEA,KAAIV,eAAeW,oBAAoBM,MAApB,CAClBJ,mBADkB,EAElBC,qBAFkB,EAGlBC,oBAHkB,EAIlBC,oBAJkB,CAAnB;;AAOAhB,gBAAeK,mBAAoBL,YAApB,EAAkC7C,aAAlC,EAAiDmD,QAAjD,CAAf;;AAEA,wBAASN,YAAT,EAAuB,UAAU1C,WAAV,EAAwB;AAC9CA,cAAY4D,gBAAZ,CAA8BN,mBAA9B;AACA,EAFD;;AAIAZ,gBAAe5B,wBAAyB4B,YAAzB,CAAf;AACAxB,kBAAkBwB,YAAlB;;AAEA,KAAKV,aAAaxC,mBAAlB,EAAwC;AACvCkD,iBAAeX,gBAAiBW,YAAjB,EAA+BV,SAA/B,EAA0C3C,iBAA1C,EAA6DC,iBAA7D,CAAf;AACA;;AAED,QAAO,oBAAMoD,YAAN,EAAoBnD,iBAApB,CAAP;AACA;;QAGAG,mB,GAAAA,mB;QACAuD,gB,GAAAA,gB;QACAzC,oB,GAAAA,oB;QACAM,uB,GAAAA,uB;QACAI,gB,GAAAA,gB;QACAU,2B,GAAAA,2B;QACAD,8B,GAAAA,8B;QACAc,mB,GAAAA,mB;QACAf,2B,GAAAA,2B;QACAK,e,GAAAA,e;QACAP,kC,GAAAA,kC;QACAY,gB,GAAAA,gB;kBAGc;AACd1C,sBAAqBA,mBADP;AAEduD,mBAAkBA,gBAFJ;AAGdzC,uBAAsBA,oBAHR;AAIdM,0BAAyBA,uBAJX;AAKdI,mBAAkBA,gBALJ;AAMdU,8BAA6BA,2BANf;AAOdD,iCAAgCA,8BAPlB;AAQdc,sBAAqBX,uCARP;AASdJ,8BAA6BA,2BATf;AAUdK,kBAAiBA,eAVH;AAWdP,qCAAoCA,kCAXtB;AAYdY,mBAAkBA;AAZJ,C","file":"relevantWords.js","sourcesContent":["import getWords from \"../stringProcessing/getWords.js\";\nimport getSentences from \"../stringProcessing/getSentences.js\";\nimport WordCombination from \"../values/WordCombination.js\";\nimport { normalize as normalizeQuotes } from \"../stringProcessing/quotes.js\";\nimport functionWordListsFactory from \"../helpers/getFunctionWords.js\";\nconst functionWordLists = functionWordListsFactory();\nimport getLanguage from \"../helpers/getLanguage.js\";\n\nimport { filter } from \"lodash-es\";\nimport { map } from \"lodash-es\";\nimport { forEach } from \"lodash-es\";\nimport { has } from \"lodash-es\";\nimport { flatMap } from \"lodash-es\";\nimport { values } from \"lodash-es\";\nimport { take } from \"lodash-es\";\nimport { includes } from \"lodash-es\";\nimport { intersection } from \"lodash-es\";\nimport { isEmpty } from \"lodash-es\";\n\nconst densityLowerLimit = 0;\nconst densityUpperLimit = 0.03;\nconst relevantWordLimit = 100;\nconst wordCountLowerLimit = 200;\n\n// First four characters: en dash, em dash, hyphen-minus, and copyright sign.\nconst specialCharacters = [ \"–\", \"—\", \"-\", \"\\u00a9\", \"#\", \"%\", \"/\", \"\\\\\", \"$\", \"€\", \"£\", \"*\", \"•\", \"|\", \"→\", \"←\", \"}\", \"{\", \"//\", \"||\", \"\\u200b\" ];\n\n/**\n * Returns the word combinations for the given text based on the combination size.\n *\n * @param {string} text The text to retrieve combinations for.\n * @param {number} combinationSize The size of the combinations to retrieve.\n * @param {Function} functionWords The function containing the lists of function words.\n * @returns {WordCombination[]} All word combinations for the given text.\n */\nfunction getWordCombinations( text, combinationSize, functionWords ) {\n\tconst sentences = getSentences( text );\n\n\tlet words, combination;\n\n\treturn flatMap( sentences, function( sentence ) {\n\t\tsentence = sentence.toLocaleLowerCase();\n\t\tsentence = normalizeQuotes( sentence );\n\t\twords = getWords( sentence );\n\n\t\treturn filter( map( words, function( word, i ) {\n\t\t\t// If there are still enough words in the sentence to slice of.\n\t\t\tif ( i + combinationSize - 1 < words.length ) {\n\t\t\t\tcombination = words.slice( i, i + combinationSize );\n\t\t\t\treturn new WordCombination( combination, 0, functionWords );\n\t\t\t}\n\n\t\t\treturn false;\n\t\t} ) );\n\t} );\n}\n\n/**\n * Calculates occurrences for a list of word combinations.\n *\n * @param {WordCombination[]} wordCombinations The word combinations to calculate occurrences for.\n * @returns {WordCombination[]} Word combinations with their respective occurrences.\n */\nfunction calculateOccurrences( wordCombinations ) {\n\tconst occurrences = {};\n\n\tforEach( wordCombinations, function( wordCombination ) {\n\t\tconst combination = wordCombination.getCombination();\n\n\t\tif ( ! has( occurrences, combination ) ) {\n\t\t\toccurrences[ combination ] = wordCombination;\n\t\t}\n\n\t\toccurrences[ combination ].incrementOccurrences();\n\t} );\n\n\treturn values( occurrences );\n}\n\n/**\n * Returns only the relevant combinations from a list of word combinations. Assumes\n * occurrences have already been calculated.\n *\n * @param {WordCombination[]} wordCombinations A list of word combinations.\n * @returns {WordCombination[]} Only relevant word combinations.\n */\nfunction getRelevantCombinations( wordCombinations ) {\n\twordCombinations = wordCombinations.filter( function( combination ) {\n\t\treturn combination.getOccurrences() !== 1 &&\n\t\t\tcombination.getRelevance() !== 0;\n\t} );\n\treturn wordCombinations;\n}\n\n/**\n * Sorts combinations based on their relevance and length.\n *\n * @param {WordCombination[]} wordCombinations The combinations to sort.\n * @returns {void}\n */\nfunction sortCombinations( wordCombinations ) {\n\twordCombinations.sort( function( combinationA, combinationB ) {\n\t\tconst difference = combinationB.getRelevance() - combinationA.getRelevance();\n\t\t// The combination with the highest relevance comes first.\n\t\tif ( difference !== 0 ) {\n\t\t\treturn difference;\n\t\t}\n\t\t// In case of a tie on relevance, the longest combination comes first.\n\t\treturn combinationB.getLength() - combinationA.getLength();\n\t} );\n}\n\n/**\n * Filters word combinations that consist of a single one-character word.\n *\n * @param {WordCombination[]} wordCombinations The word combinations to filter.\n * @returns {WordCombination[]} Filtered word combinations.\n */\nfunction filterOneCharacterWordCombinations( wordCombinations ) {\n\treturn wordCombinations.filter( function( combination ) {\n\t\treturn ! ( combination.getLength() === 1 && combination.getWords()[ 0 ].length <= 1 );\n\t} );\n}\n\n/**\n * Filters word combinations containing certain function words at any position.\n *\n * @param {WordCombination[]} wordCombinations The word combinations to filter.\n * @param {array} functionWords The list of function words.\n * @returns {WordCombination[]} Filtered word combinations.\n */\nfunction filterFunctionWordsAnywhere( wordCombinations, functionWords ) {\n\treturn wordCombinations.filter( function( combination ) {\n\t\treturn isEmpty(\n\t\t\tintersection( functionWords, combination.getWords() )\n\t\t);\n\t} );\n}\n\n/**\n * Filters word combinations beginning with certain function words.\n *\n * @param {WordCombination[]} wordCombinations The word combinations to filter.\n * @param {array} functionWords The list of function words.\n * @returns {WordCombination[]} Filtered word combinations.\n */\nfunction filterFunctionWordsAtBeginning( wordCombinations, functionWords ) {\n\treturn wordCombinations.filter( function( combination ) {\n\t\treturn ! includes( functionWords, combination.getWords()[ 0 ] );\n\t} );\n}\n\n/**\n * Filters word combinations ending with certain function words.\n *\n * @param {WordCombination[]} wordCombinations The word combinations to filter.\n * @param {array} functionWords The list of function words.\n * @returns {WordCombination[]} Filtered word combinations.\n */\nfunction filterFunctionWordsAtEnding( wordCombinations, functionWords ) {\n\treturn wordCombinations.filter( function( combination ) {\n\t\tconst words = combination.getWords();\n\t\tconst lastWordIndex = words.length - 1;\n\t\treturn ! includes( functionWords, words[ lastWordIndex ] );\n\t} );\n}\n\n/**\n * Filters word combinations beginning and ending with certain function words.\n *\n * @param {WordCombination[]} wordCombinations The word combinations to filter.\n * @param {Array} functionWords The list of function words.\n * @returns {WordCombination[]} Filtered word combinations.\n */\nfunction filterFunctionWordsAtBeginningAndEnding( wordCombinations, functionWords ) {\n\twordCombinations = filterFunctionWordsAtBeginning( wordCombinations, functionWords );\n\twordCombinations = filterFunctionWordsAtEnding( wordCombinations, functionWords );\n\treturn wordCombinations;\n}\n\n/**\n * Filters word combinations based on keyword density if the word count is 200 or over.\n *\n * @param {WordCombination[]} wordCombinations The word combinations to filter.\n * @param {number} wordCount The number of words in the total text.\n * @param {number} lowerLimit The lower limit of keyword density.\n * @param {number} upperLimit The upper limit of keyword density.\n * @returns {WordCombination[]} Filtered word combinations.\n */\nfunction filterOnDensity( wordCombinations, wordCount, lowerLimit, upperLimit ) {\n\treturn wordCombinations.filter( function( combination ) {\n\t\treturn ( combination.getDensity( wordCount ) >= lowerLimit && combination.getDensity( wordCount ) < upperLimit\n\t\t);\n\t} );\n}\n\n/**\n * Filters combinations based on whether they end with a specified string or not.\n *\n * @param {WordCombination[]} wordCombinations The array of WordCombinations to filter.\n * @param {string} str The string the WordCombinations that need to be filtered out end with.\n * @param {string[]} exceptions The array of strings containing exceptions to not filter.\n * @returns {WordCombination[]} The filtered array of WordCombinations.\n */\nfunction filterEndingWith( wordCombinations, str, exceptions ) {\n\twordCombinations = wordCombinations.filter( function( combination ) {\n\t\tconst combinationstr = combination.getCombination();\n\t\tfor ( let i = 0; i < exceptions.length; i++ ) {\n\t\t\tif ( combinationstr.endsWith( exceptions[ i ] ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn ! combinationstr.endsWith( str );\n\t} );\n\treturn wordCombinations;\n}\n\n/**\n * Filters the list of word combination objects based on the language-specific function word filters.\n * Word combinations with specific parts of speech are removed.\n *\n * @param {Array} combinations The list of word combination objects.\n * @param {Function} functionWords The function containing the lists of function words.\n * @returns {Array} The filtered list of word combination objects.\n */\nfunction filterFunctionWords( combinations, functionWords ) {\n\tcombinations = filterFunctionWordsAnywhere( combinations, functionWords.filteredAnywhere );\n\tcombinations = filterFunctionWordsAtBeginningAndEnding( combinations, functionWords.filteredAtBeginningAndEnding );\n\tcombinations = filterFunctionWordsAtEnding( combinations, functionWords.filteredAtEnding );\n\tcombinations = filterFunctionWordsAtBeginning( combinations, functionWords.filteredAtBeginning );\n\treturn combinations;\n}\n\n/**\n * Filters the list of word combination objects based on function word filters, a special character filter and\n * a one-character filter.\n *\n * @param {Array} combinations The list of word combination objects.\n * @param {Function} functionWords The function containing the lists of function words.\n * @param {string} language The language for which specific filters should be applied.\n * @returns {Array} The filtered list of word combination objects.\n */\nfunction filterCombinations( combinations, functionWords, language ) {\n\tcombinations = filterFunctionWordsAnywhere( combinations, specialCharacters );\n\tcombinations = filterOneCharacterWordCombinations( combinations );\n\tcombinations = filterFunctionWords( combinations, functionWords );\n\tif ( language === \"en\" ) {\n\t\tcombinations = filterEndingWith( combinations, \"'s\", [] );\n\t}\n\treturn combinations;\n}\n/**\n * Returns the relevant words in a given text.\n *\n * @param {string} text The text to retrieve the relevant words of.\n * @param {string} locale The paper's locale.\n * @returns {WordCombination[]} All relevant words sorted and filtered for this text.\n */\nfunction getRelevantWords( text, locale ) {\n\tlet language = getLanguage( locale );\n\tif ( ! functionWordLists.hasOwnProperty( language ) ) {\n\t\tlanguage = \"en\";\n\t}\n\n\tconst functionWords = functionWordLists[ language ];\n\n\tconst words = getWordCombinations( text, 1, functionWords.all );\n\tconst wordCount = words.length;\n\n\tlet oneWordCombinations = getRelevantCombinations(\n\t\tcalculateOccurrences( words )\n\t);\n\n\tsortCombinations( oneWordCombinations );\n\toneWordCombinations = take( oneWordCombinations, 100 );\n\n\tconst oneWordRelevanceMap = {};\n\n\tforEach( oneWordCombinations, function( combination ) {\n\t\toneWordRelevanceMap[ combination.getCombination() ] = combination.getRelevance();\n\t} );\n\n\tconst twoWordCombinations = calculateOccurrences( getWordCombinations( text, 2, functionWords.all ) );\n\tconst threeWordCombinations = calculateOccurrences( getWordCombinations( text, 3, functionWords.all ) );\n\tconst fourWordCombinations = calculateOccurrences( getWordCombinations( text, 4, functionWords.all ) );\n\tconst fiveWordCombinations = calculateOccurrences( getWordCombinations( text, 5, functionWords.all ) );\n\n\tlet combinations = oneWordCombinations.concat(\n\t\ttwoWordCombinations,\n\t\tthreeWordCombinations,\n\t\tfourWordCombinations,\n\t\tfiveWordCombinations\n\t);\n\n\tcombinations = filterCombinations( combinations, functionWords, language );\n\n\tforEach( combinations, function( combination ) {\n\t\tcombination.setRelevantWords( oneWordRelevanceMap );\n\t} );\n\n\tcombinations = getRelevantCombinations( combinations );\n\tsortCombinations( combinations );\n\n\tif ( wordCount >= wordCountLowerLimit ) {\n\t\tcombinations = filterOnDensity( combinations, wordCount, densityLowerLimit, densityUpperLimit );\n\t}\n\n\treturn take( combinations, relevantWordLimit );\n}\n\nexport {\n\tgetWordCombinations,\n\tgetRelevantWords,\n\tcalculateOccurrences,\n\tgetRelevantCombinations,\n\tsortCombinations,\n\tfilterFunctionWordsAtEnding,\n\tfilterFunctionWordsAtBeginning,\n\tfilterFunctionWords,\n\tfilterFunctionWordsAnywhere,\n\tfilterOnDensity,\n\tfilterOneCharacterWordCombinations,\n\tfilterEndingWith,\n};\n\nexport default {\n\tgetWordCombinations: getWordCombinations,\n\tgetRelevantWords: getRelevantWords,\n\tcalculateOccurrences: calculateOccurrences,\n\tgetRelevantCombinations: getRelevantCombinations,\n\tsortCombinations: sortCombinations,\n\tfilterFunctionWordsAtEnding: filterFunctionWordsAtEnding,\n\tfilterFunctionWordsAtBeginning: filterFunctionWordsAtBeginning,\n\tfilterFunctionWords: filterFunctionWordsAtBeginningAndEnding,\n\tfilterFunctionWordsAnywhere: filterFunctionWordsAnywhere,\n\tfilterOnDensity: filterOnDensity,\n\tfilterOneCharacterWordCombinations: filterOneCharacterWordCombinations,\n\tfilterEndingWith: filterEndingWith,\n};\n"]}