{"version":3,"sources":["../../../../src/assessments/seo/TextLengthAssessment.js"],"names":["TextLengthAssessment","Assessment","constructor","config","defaultConfig","recommendedMinimum","slightlyBelowMinimum","belowMinimum","veryFarBelowMinimum","scores","farBelowMinimum","urlTitle","urlCallToAction","cornerstoneContent","identifier","_config","getResult","paper","researcher","i18n","wordCount","getResearch","assessmentResult","AssessmentResult","calculatedResult","calculateResult","setScore","score","setText","resultText","sprintf","dngettext","badScore"],"mappings":"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","file":"TextLengthAssessment.js","sourcesContent":["import { inRange, merge } from \"lodash-es\";\n\nimport Assessment from \"../../assessment\";\nimport { createAnchorOpeningTag } from \"../../helpers/shortlinker\";\nimport AssessmentResult from \"../../values/AssessmentResult\";\n\n/**\n * Assessment that will test if the text is long enough.\n */\nexport default class TextLengthAssessment extends Assessment {\n\t/**\n\t * Sets the identifier and the config.\n\t *\n\t * @param {Object} [config] The configuration to use.\n\t *\n\t * @returns {void}\n\t */\n\tconstructor( config = {} ) {\n\t\tsuper();\n\n\t\tconst defaultConfig = {\n\t\t\trecommendedMinimum: 300,\n\t\t\tslightlyBelowMinimum: 250,\n\t\t\tbelowMinimum: 200,\n\t\t\tveryFarBelowMinimum: 100,\n\n\t\t\tscores: {\n\t\t\t\trecommendedMinimum: 9,\n\t\t\t\tslightlyBelowMinimum: 6,\n\t\t\t\tbelowMinimum: 3,\n\t\t\t\tfarBelowMinimum: -10,\n\t\t\t\tveryFarBelowMinimum: -20,\n\t\t\t},\n\t\t\turlTitle: createAnchorOpeningTag( \"https://yoa.st/34n\" ),\n\t\t\turlCallToAction: createAnchorOpeningTag( \"https://yoa.st/34o\" ),\n\n\t\t\tcornerstoneContent: false,\n\t\t};\n\n\t\tthis.identifier = \"textLength\";\n\t\tthis._config = merge( defaultConfig, config );\n\t}\n\n\t/**\n\t * Execute the Assessment and return a result.\n\t *\n\t * @param {Paper} paper The Paper object to assess.\n\t * @param {Researcher} researcher The Researcher object containing all available researches.\n\t * @param {Jed} i18n The locale object.\n\t *\n\t * @returns {AssessmentResult} The result of the assessment, containing both a score and a descriptive text.\n\t */\n\tgetResult( paper, researcher, i18n ) {\n\t\tconst wordCount = researcher.getResearch( \"wordCountInText\" );\n\t\tconst assessmentResult = new AssessmentResult();\n\t\tconst calculatedResult = this.calculateResult( wordCount, i18n );\n\n\t\tassessmentResult.setScore( calculatedResult.score );\n\t\tassessmentResult.setText( calculatedResult.resultText );\n\n\t\treturn assessmentResult;\n\t}\n\n\t/**\n\t * Returns the score and the appropriate feedback string based on the current word count.\n\t *\n\t * @param {number} wordCount The amount of words to be checked against.\n\t * @param {Jed} i18n The locale object.\n\t *\n\t * @returns {Object} The score and the feedback string.\n\t */\n\tcalculateResult( wordCount, i18n ) {\n\t\tif ( wordCount >= this._config.recommendedMinimum ) {\n\t\t\treturn {\n\t\t\t\tscore: this._config.scores.recommendedMinimum,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\ti18n.dngettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t/* Translators: %1$d expands to the number of words in the text,\n\t\t\t\t\t\t%2$s expands to a link on yoast.com, %3$s expands to the anchor end tag */\n\t\t\t\t\t\t\"%2$sText length%3$s: The text contains %1$d word. Good job!\",\n\t\t\t\t\t\t\"%2$sText length%3$s: The text contains %1$d words. Good job!\",\n\t\t\t\t\t\twordCount ),\n\t\t\t\t\twordCount,\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\t\"</a>\",\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\tif ( inRange( wordCount, 0, this._config.belowMinimum ) ) {\n\t\t\tlet badScore = this._config.scores.farBelowMinimum;\n\n\t\t\tif ( inRange( wordCount, 0, this._config.veryFarBelowMinimum ) ) {\n\t\t\t\tbadScore = this._config.scores.veryFarBelowMinimum;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tscore: badScore,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\ti18n.dngettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t/* Translators: %1$d expands to the number of words in the text,\n\t\t\t\t\t\t%2$s expands to a link on yoast.com, %4$s expands to the anchor end tag. */\n\t\t\t\t\t\t\"%2$sText length%4$s: The text contains %1$d word.\",\n\t\t\t\t\t\t\"%2$sText length%4$s: The text contains %1$d words.\",\n\t\t\t\t\t\twordCount\n\t\t\t\t\t) + \" \" + i18n.dngettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t/* Translators: The preceding sentence is \"Text length: The text contains x words.\",\n\t\t\t\t\t\t%3$s expands to a link on yoast.com,\n\t\t\t\t\t\t%4$s expands to the anchor end tag,\n\t\t\t\t\t\t%5$d expands to the recommended minimum of words. */\n\t\t\t\t\t\t\"This is far below the recommended minimum of %5$d word. %3$sAdd more content%4$s.\",\n\t\t\t\t\t\t\"This is far below the recommended minimum of %5$d words. %3$sAdd more content%4$s.\",\n\t\t\t\t\t\tthis._config.recommendedMinimum\n\t\t\t\t\t),\n\t\t\t\t\twordCount,\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\",\n\t\t\t\t\tthis._config.recommendedMinimum\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\tif ( inRange( wordCount, this._config.slightlyBelowMinimum, this._config.recommendedMinimum ) ) {\n\t\t\tif ( this._config.cornerstoneContent === false ) {\n\t\t\t\treturn {\n\t\t\t\t\tscore: this._config.scores.slightlyBelowMinimum,\n\t\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\t\ti18n.dngettext(\n\t\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\t/* Translators: %1$d expands to the number of words in the text,\n\t\t\t\t\t\t\t%2$s expands to a link on yoast.com, %4$s expands to the anchor end tag. */\n\t\t\t\t\t\t\t\"%2$sText length%4$s: The text contains %1$d word.\",\n\t\t\t\t\t\t\t\"%2$sText length%4$s: The text contains %1$d words.\",\n\t\t\t\t\t\t\twordCount\n\t\t\t\t\t\t) + \" \" + i18n.dngettext(\n\t\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t\t/* Translators: The preceding sentence is \"Text length: The text contains x words.\",\n\t\t\t\t\t\t\t%3$s expands to a link on yoast.com,\n\t\t\t\t\t\t\t%4$s expands to the anchor end tag,\n\t\t\t\t\t\t\t%5$d expands to the recommended minimum of words. */\n\t\t\t\t\t\t\t\"This is slightly below the recommended minimum of %5$d word. %3$sAdd a bit more copy%4$s.\",\n\t\t\t\t\t\t\t\"This is slightly below the recommended minimum of %5$d words. %3$sAdd a bit more copy%4$s.\",\n\t\t\t\t\t\t\tthis._config.recommendedMinimum\n\t\t\t\t\t\t),\n\t\t\t\t\t\twordCount,\n\t\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\t\"</a>\",\n\t\t\t\t\t\tthis._config.recommendedMinimum\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tscore: this._config.scores.slightlyBelowMinimum,\n\t\t\t\tresultText: i18n.sprintf(\n\t\t\t\t\ti18n.dngettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t/* Translators: %1$d expands to the number of words in the text,\n\t\t\t\t\t\t%2$s expands to a link on yoast.com, %4$s expands to the anchor end tag. */\n\t\t\t\t\t\t\"%2$sText length%4$s: The text contains %1$d word.\",\n\t\t\t\t\t\t\"%2$sText length%4$s: The text contains %1$d words.\",\n\t\t\t\t\t\twordCount\n\t\t\t\t\t) + \" \" + i18n.dngettext(\n\t\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t\t/* Translators: The preceding sentence is \"Text length: The text contains x words.\",\n\t\t\t\t\t\t%3$s expands to a link on yoast.com,\n\t\t\t\t\t\t%4$s expands to the anchor end tag,\n\t\t\t\t\t\t%5$d expands to the recommended minimum of words. */\n\t\t\t\t\t\t\"This is below the recommended minimum of %5$d word. %3$sAdd more content%4$s.\",\n\t\t\t\t\t\t\"This is below the recommended minimum of %5$d words. %3$sAdd more content%4$s.\",\n\t\t\t\t\t\tthis._config.recommendedMinimum\n\t\t\t\t\t),\n\t\t\t\t\twordCount,\n\t\t\t\t\tthis._config.urlTitle,\n\t\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\t\"</a>\",\n\t\t\t\t\tthis._config.recommendedMinimum\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tscore: this._config.scores.belowMinimum,\n\t\t\tresultText: i18n.sprintf(\n\t\t\t\ti18n.dngettext(\n\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t/* Translators: %1$d expands to the number of words in the text,\n\t\t\t\t\t%2$s expands to a link on yoast.com, %4$s expands to the anchor end tag. */\n\t\t\t\t\t\"%2$sText length%4$s: The text contains %1$d word.\",\n\t\t\t\t\t\"%2$sText length%4$s: The text contains %1$d words.\",\n\t\t\t\t\twordCount\n\t\t\t\t) + \" \" + i18n.dngettext(\n\t\t\t\t\t\"js-text-analysis\",\n\t\t\t\t\t/* Translators: The preceding sentence is \"Text length: The text contains x words.\",\n\t\t\t\t\t%3$s expands to a link on yoast.com,\n\t\t\t\t\t%4$s expands to the anchor end tag,\n\t\t\t\t\t%5$d expands to the recommended minimum of words. */\n\t\t\t\t\t\"This is below the recommended minimum of %5$d word. %3$sAdd more content%4$s.\",\n\t\t\t\t\t\"This is below the recommended minimum of %5$d words. %3$sAdd more content%4$s.\",\n\t\t\t\t\tthis._config.recommendedMinimum\n\t\t\t\t),\n\t\t\t\twordCount,\n\t\t\t\tthis._config.urlTitle,\n\t\t\t\tthis._config.urlCallToAction,\n\t\t\t\t\"</a>\",\n\t\t\t\tthis._config.recommendedMinimum\n\t\t\t),\n\t\t};\n\t}\n}\n"]}