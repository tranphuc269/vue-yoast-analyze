{"version":3,"sources":["../../../src/researches/h1s.js"],"names":["paper","text","getText","blocks","emptyBlock","h1s","forEach","block","index","match","h1Regex","exec","push","tag","content","position","trim"],"mappings":";;;;;;kBAyBe,UAAUA,KAAV,EAAkB;AAChC,OAAMC,OAAOD,MAAME,OAAN,EAAb;;AAEA,KAAIC,SAAS,qBAAWF,IAAX,CAAb;AACAE,UAAS,sBAAQA,MAAR,EAAgBC,UAAhB,CAAT;;AAEA,OAAMC,MAAM,EAAZ;AACAF,QAAOG,OAAP,CAAgB,CAAEC,KAAF,EAASC,KAAT,KAAoB;AACnC,QAAMC,QAAQC,QAAQC,IAAR,CAAcJ,KAAd,CAAd;AACA,MAAKE,KAAL,EAAa;AACZJ,OAAIO,IAAJ,CAAU;AACTC,SAAK,IADI;AAETC,aAASL,MAAO,CAAP,CAFA;AAGTM,cAAUP;AAHD,IAAV;AAKA;AACD,EATD;;AAWA,QAAOH,GAAP;AACA,C;;AA5CD;;AACA;;AAEA,MAAMK,UAAU,oBAAhB;;AAEA;;;;;;;AAOA,MAAMN,aAAa,SAAbA,UAAa,CAAUG,KAAV,EAAkB;AACpCA,SAAQA,MAAMS,IAAN,EAAR;AACA,QAAOT,UAAU,SAAV,IAAuBA,UAAU,EAAxC;AACA,CAHD;;AAMA","file":"h1s.js","sourcesContent":["import { getBlocks } from \"../helpers/html\";\nimport { reject } from \"lodash-es\";\n\nconst h1Regex = /<h1.*?>(.*?)<\\/h1>/;\n\n/**\n * Gets a block from a text and checks if it is totally empty or if it is an empty paragraph.\n *\n * @param {string} block A HTML block extracted from the paper.\n *\n * @returns {boolean} Whether the block is empty or not.\n */\nconst emptyBlock = function( block ) {\n\tblock = block.trim();\n\treturn block === \"<p></p>\" || block === \"\";\n};\n\n\n/**\n * Gets all H1s in a text, including their content and their position with regards to other HTML blocks.\n *\n * @param {Paper} paper The paper for which to get the H1s.\n *\n * @returns {Array} An array with all H1s, their content and position.\n */\nexport default function( paper ) {\n\tconst text = paper.getText();\n\n\tlet blocks = getBlocks( text );\n\tblocks = reject( blocks, emptyBlock );\n\n\tconst h1s = [];\n\tblocks.forEach( ( block, index ) => {\n\t\tconst match = h1Regex.exec( block );\n\t\tif ( match ) {\n\t\t\th1s.push( {\n\t\t\t\ttag: \"h1\",\n\t\t\t\tcontent: match[ 1 ],\n\t\t\t\tposition: index,\n\t\t\t} );\n\t\t}\n\t} );\n\n\treturn h1s;\n}\n"]}