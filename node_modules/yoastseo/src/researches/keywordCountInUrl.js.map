{"version":3,"sources":["../../../src/researches/keywordCountInUrl.js"],"names":["paper","researcher","topicForms","getResearch","parsedSlug","getUrl","keyphraseInSlug","getLocale","percentWordMatches","unparsedSlug","keyphraseLength","keyphraseForms","length"],"mappings":";;;;;;kBAae,UAAUA,KAAV,EAAiBC,UAAjB,EAA8B;AAC5C,OAAMC,aAAaD,WAAWE,WAAX,CAAwB,YAAxB,CAAnB;AACA,OAAMC,aAAa,yBAAWJ,MAAMK,MAAN,EAAX,CAAnB;;AAEA,KAAIC,kBAAkB,sDAAwBJ,UAAxB,EAAoCE,UAApC,EAAgD,KAAhD,EAAuDJ,MAAMO,SAAN,EAAvD,CAAtB;AACA;;;AAGA,KAAKD,gBAAgBE,kBAAhB,KAAuC,CAA5C,EAAgD;AAC/C,QAAMC,eAAeT,MAAMK,MAAN,EAArB;AACAC,oBAAkB,sDAAwBJ,UAAxB,EAAoCO,YAApC,EAAkD,KAAlD,EAAyDT,MAAMO,SAAN,EAAzD,CAAlB;AACA;AACD,QAAO;AACNG,mBAAiBR,WAAWS,cAAX,CAA0BC,MADrC;AAENJ,sBAAoBF,gBAAgBE;AAF9B,EAAP;AAIA,C;;AA3BD;;;;AACA","file":"keywordCountInUrl.js","sourcesContent":["/** @module researches/countKeywordInUrl */\n\nimport parseSlug from \"../stringProcessing/parseSlug\";\nimport { findTopicFormsInString } from \"./findKeywordFormsInString.js\";\n\n/**\n * Matches the keyword in the URL. Replaces dashes and underscores with whitespaces and uses whitespace as wordboundary.\n *\n * @param {Paper} paper the Paper object to use in this count.\n * @param {Researcher} researcher The Researcher object containing all available researches.\n *\n * @returns {int} Number of times the keyword is found.\n */\nexport default function( paper, researcher ) {\n\tconst topicForms = researcher.getResearch( \"morphology\" );\n\tconst parsedSlug = parseSlug( paper.getUrl() );\n\n\tlet keyphraseInSlug = findTopicFormsInString( topicForms, parsedSlug, false, paper.getLocale() );\n\t/* In case we deal with a language where dashes are part of the word (e.g., in Indonesian: buku-buku),\n\t * Try looking for the keywords in the unparsed slug.\n\t */\n\tif ( keyphraseInSlug.percentWordMatches === 0 ) {\n\t\tconst unparsedSlug = paper.getUrl();\n\t\tkeyphraseInSlug = findTopicFormsInString( topicForms, unparsedSlug, false, paper.getLocale() );\n\t}\n\treturn {\n\t\tkeyphraseLength: topicForms.keyphraseForms.length,\n\t\tpercentWordMatches: keyphraseInSlug.percentWordMatches,\n\t};\n}\n"]}