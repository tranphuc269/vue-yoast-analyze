{"version":3,"sources":["../../../src/researches/readingTime.js"],"names":["paper","language","getLocale","wordsPerMinute","ar","cn","de","en","es","fi","fr","he","it","ja","nl","pl","pt","ru","sl","sv","tr","minutesPerImage","wordsPerMinuteScore","sumWordsPerMinute","Object","values","reduce","a","b","sumNumberOfLanguages","keys","length","numberOfWords","numberOfImages","Math","ceil"],"mappings":";;;;;;kBAUe,UAAUA,KAAV,EAAkB;AAChC,OAAMC,WAAW,2BAAaD,MAAME,SAAN,EAAb,CAAjB;;AAEA;;;;;;AAMA,OAAMC,iBAAiB;AACtBC,MAAI,GADkB;AAEtBC,MAAI,GAFkB;AAGtBC,MAAI,GAHkB;AAItBC,MAAI,GAJkB;AAKtBC,MAAI,GALkB;AAMtBC,MAAI,GANkB;AAOtBC,MAAI,GAPkB;AAQtBC,MAAI,GARkB;AAStBC,MAAI,GATkB;AAUtBC,MAAI,GAVkB;AAWtBC,MAAI,GAXkB;AAYtBC,MAAI,GAZkB;AAatBC,MAAI,GAbkB;AActBC,MAAI,GAdkB;AAetBC,MAAI,GAfkB;AAgBtBC,MAAI,GAhBkB;AAiBtBC,MAAI;AAjBkB,EAAvB;AAmBA,OAAMC,kBAAkB,GAAxB;;AAEA,KAAIC,sBAAsBnB,eAAgBF,QAAhB,CAA1B;;AAEA;AACA,KAAK,CAAEqB,mBAAP,EAA6B;AAC5B,QAAMC,oBAAoBC,OAAOC,MAAP,CAAetB,cAAf,EAAgCuB,MAAhC,CAAwC,CAAEC,CAAF,EAAKC,CAAL,KAAYD,IAAIC,CAAxD,CAA1B;AACA,QAAMC,uBAAuBL,OAAOM,IAAP,CAAa3B,cAAb,EAA8B4B,MAA3D;AACAT,wBAAsBC,oBAAoBM,oBAA1C;AACA;;AAED,OAAMG,gBAAgB,+BAAiBhC,KAAjB,CAAtB;AACA,OAAMiC,iBAAiB,gCAAYjC,KAAZ,CAAvB;;AAEA;;;;;AAKA,QAAOkC,KAAKC,IAAL,CAAaH,gBAAgBV,mBAAlB,GAA4CW,iBAAiBZ,eAAxE,CAAP;AACA,C;;AA1DD;;;;AACA;;;;AACA","file":"readingTime.js","sourcesContent":["import getLanguage from \"../helpers/getLanguage\";\nimport wordCountInText from \"./wordCountInText.js\";\nimport imageCount from \"./imageCountInText.js\";\n\n/**\n * Calculates the expected reading time of a text.\n *\n * @param {Paper} paper The paper to calculate the reading time for.\n * @returns {number|null} The expected reading time in minutes or null if we don't have reading time configuration for a given language.\n */\nexport default function( paper ) {\n\tconst language = getLanguage( paper.getLocale() );\n\n\t/*\n\t * These numbers are based on research into average reading times:\n\t * Susanne Trauzettel-Klosinski, Klaus Dietz, the IReST Study Group;\n\t * Standardized Assessment of Reading Performance: The New International Reading Speed Texts IReST.\n\t * Invest. Ophthalmol. Vis. Sci. 2012;53(9):5452-5461\n\t */\n\tconst wordsPerMinute = {\n\t\tar: 138,\n\t\tcn: 158,\n\t\tde: 179,\n\t\ten: 228,\n\t\tes: 218,\n\t\tfi: 161,\n\t\tfr: 195,\n\t\the: 187,\n\t\tit: 188,\n\t\tja: 193,\n\t\tnl: 202,\n\t\tpl: 166,\n\t\tpt: 181,\n\t\tru: 184,\n\t\tsl: 180,\n\t\tsv: 199,\n\t\ttr: 166,\n\t};\n\tconst minutesPerImage = 0.2;\n\n\tlet wordsPerMinuteScore = wordsPerMinute[ language ];\n\n\t// If the language is not on the list, assign the average of all language-dependent reading times as the score.\n\tif ( ! wordsPerMinuteScore ) {\n\t\tconst sumWordsPerMinute = Object.values( wordsPerMinute ).reduce( ( a, b ) => a + b );\n\t\tconst sumNumberOfLanguages = Object.keys( wordsPerMinute ).length;\n\t\twordsPerMinuteScore = sumWordsPerMinute / sumNumberOfLanguages;\n\t}\n\n\tconst numberOfWords = wordCountInText( paper );\n\tconst numberOfImages = imageCount( paper );\n\n\t/*\n\t * This formula is based on the average number of words a person is expected to read per minute,\n\t * plus extra time for each image in the text. It returns the expected reading time in whole minutes,\n\t * rounded up to the nearest minute.\n\t */\n\treturn Math.ceil( ( numberOfWords / wordsPerMinuteScore ) + ( numberOfImages * minutesPerImage ) );\n}\n"]}